<html>
	<head>
		<style>
			.favorite {
				background-color: green;
			}

		</style>


		<title>Acme Faker Favorites React</title>
		<script src="https://unpkg.com/react@16/umd/react.production.min.js" crossorigin></script>
		<script src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js" crossorigin></script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/Faker/3.1.0/faker.js' defer></script>
		<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
	</head>
	<body>
		<div id='app'></div>
		<script type='text/babel'>
			const { Component } = React;
			const { render } = ReactDOM;

			const app = document.querySelector('#app');

			class App extends Component {
				constructor() {
					super();
					this.state = {
						userList: users,
					}
				}

				clicked(idx) {
					userList[idx].isFavorite = !userList[idx].isFavorite
					this.setState( { userList })
				}

				render() {
					const{ userList } = this.state
					return (
						<div>
							<h1>Acme Faker Favorites</h1>
							<h2>You have { userList.filter( user => user.isFavorite).length } favorite users</h2>
							<ul>
							{ userList.map(( { user, isFavorite }, idx) => {
								return (
								<li key={ idx } className={ isFavorite ? 'favorite' : ''} onClick={ this.clicked(idx) }>
									{ user.name }
									{ user.username }
								</li>
								)
							}) }
							</ul>
						</div>
					)
				}
			}

			const generateUsers = () => {
				return new Array(Math.ceil(Math.random() * 20)).fill('').map(item => {
					return item = {
						user: faker.helpers.createCard(),
						isFavorite: (Math.ceil(Math.random() * 3) === 1 ? true : false)
					}
				});
			}

			const users = generateUsers();
			console.log('userList;', users)
			render(<App />, app);
		</script>
	</body>
</html>